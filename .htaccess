PassengerNodejs /home/u/bratskprof/.local/bin/node
PassengerAppRoot /home/u/bratskprof/manager.bratskprofil.ru
PassengerAppType node
PassengerStartupFile server.js

<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # If the request is not for an existing file or directory
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    
    # If the request starts with /api, rewrite to the Node.js server
    RewriteCond %{REQUEST_URI} ^/api/
    RewriteRule ^(.*)$ http://127.0.0.1:3000/$1 [P,L]
    
    # For all other requests, serve index.html
    RewriteRule ^(.*)$ /index.html [L,QSA]
</IfModule>

# Set proper MIME types
AddType application/javascript .js
AddType application/json .json